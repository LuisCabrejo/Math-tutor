<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”§ Math Tutor - DiagnÃ³stico</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea, #764ba2);
            margin: 0;
            padding: 20px;
            color: white;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        .test-item {
            background: rgba(255,255,255,0.1);
            margin: 15px 0;
            padding: 15px;
            border-radius: 8px;
            border-left: 5px solid #feca57;
        }
        .test-pass { border-left-color: #2ecc71; }
        .test-fail { border-left-color: #e74c3c; }
        .test-loading { border-left-color: #f39c12; }
        pre {
            background: rgba(0,0,0,0.3);
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 0.9rem;
        }
        button {
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin: 10px 5px;
        }
        button:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ Math Tutor - DiagnÃ³stico del Sistema</h1>
        <p>Esta pÃ¡gina te ayuda a identificar y solucionar problemas de carga de archivos.</p>

        <div id="results">
            <div class="test-item test-loading">
                <h3>â³ Ejecutando diagnÃ³stico...</h3>
                <p>Por favor, espera mientras verificamos todos los componentes.</p>
            </div>
        </div>

        <div style="margin-top: 30px;">
            <button onclick="runDiagnostic()">ğŸ”„ Re-ejecutar DiagnÃ³stico</button>
            <button onclick="testMathParser()">ğŸ§® Probar Math Parser</button>
            <button onclick="showFileContents()">ğŸ“„ Mostrar Archivos</button>
        </div>

        <div id="fileContents" style="margin-top: 20px;"></div>
    </div>

    <!-- Scripts con diagnÃ³stico -->
    <script>
        let diagnosticResults = {};

        // Verificar carga de archivos
        function checkFileLoading() {
            const tests = {
                'HTML Base': document.readyState === 'complete',
                'MathParser Class': typeof MathParser !== 'undefined',
                'Exercise Data': typeof predefinedExercises !== 'undefined',
                'Quick Examples': typeof quickExamples !== 'undefined',
                'Educational Messages': typeof educationalMessages !== 'undefined'
            };

            return tests;
        }

        function runDiagnostic() {
            const results = document.getElementById('results');
            const tests = checkFileLoading();

            let html = '<h2>ğŸ“Š Resultados del DiagnÃ³stico</h2>';

            Object.entries(tests).forEach(([testName, passed]) => {
                const status = passed ? 'test-pass' : 'test-fail';
                const icon = passed ? 'âœ…' : 'âŒ';

                html += `
                    <div class="test-item ${status}">
                        <h3>${icon} ${testName}</h3>
                        <p>Estado: <strong>${passed ? 'CORRECTO' : 'ERROR'}</strong></p>
                    </div>
                `;
            });

            // Verificar estructura de archivos
            html += '<h3>ğŸ“ Estructura de Archivos Esperada:</h3>';
            html += `
                <pre>math_tutor/
â”œâ”€â”€ index.html
â”œâ”€â”€ debug.html (este archivo)
â”œâ”€â”€ css/
â”‚   â””â”€â”€ style.css
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ mathParser.js
â”‚   â”œâ”€â”€ exerciseData.js
â”‚   â””â”€â”€ script.js
â””â”€â”€ app.py (opcional)</pre>
            `;

            // Recomendaciones
            const failedTests = Object.entries(tests).filter(([,passed]) => !passed);
            if (failedTests.length > 0) {
                html += '<h3>ğŸ”§ Soluciones Recomendadas:</h3>';
                html += '<div class="test-item test-fail">';

                if (!tests['MathParser Class']) {
                    html += '<p><strong>âŒ MathParser no encontrado:</strong><br>';
                    html += 'â€¢ Verifica que el archivo <code>js/mathParser.js</code> existe<br>';
                    html += 'â€¢ Comprueba que la ruta sea correcta en index.html<br>';
                    html += 'â€¢ AsegÃºrate de usar un servidor HTTP (no file://)</p>';
                }

                if (!tests['Exercise Data']) {
                    html += '<p><strong>âŒ Datos de ejercicios no encontrados:</strong><br>';
                    html += 'â€¢ Verifica que el archivo <code>js/exerciseData.js</code> existe<br>';
                    html += 'â€¢ Comprueba la sintaxis del archivo JavaScript</p>';
                }

                html += '<p><strong>ğŸš€ Comando recomendado:</strong><br>';
                html += '<code>python -m http.server 8000</code><br>';
                html += 'Luego visita: <code>http://localhost:8000</code></p>';
                html += '</div>';
            } else {
                html += '<div class="test-item test-pass">';
                html += '<h3>ğŸ‰ Â¡Todo estÃ¡ funcionando correctamente!</h3>';
                html += '<p>Puedes proceder a usar Math Tutor sin problemas.</p>';
                html += '</div>';
            }

            results.innerHTML = html;
        }

        function testMathParser() {
            if (typeof MathParser === 'undefined') {
                alert('âŒ MathParser no estÃ¡ disponible. Revisa la carga de js/mathParser.js');
                return;
            }

            try {
                const parser = new MathParser();
                const result = parser.evaluateCustomExpression('âˆ›27+âˆš16');

                const resultsDiv = document.getElementById('results');
                resultsDiv.innerHTML += `
                    <div class="test-item test-pass">
                        <h3>ğŸ§® Prueba de Math Parser</h3>
                        <p><strong>ExpresiÃ³n:</strong> âˆ›27+âˆš16</p>
                        <p><strong>Resultado:</strong> ${result.result}</p>
                        <p><strong>Ã‰xito:</strong> ${result.success ? 'SÃ' : 'NO'}</p>
                        <p><strong>Pasos:</strong> ${result.steps ? result.steps.length : 0} pasos generados</p>
                    </div>
                `;
            } catch (error) {
                alert('âŒ Error al probar MathParser: ' + error.message);
            }
        }

        function showFileContents() {
            const container = document.getElementById('fileContents');
            container.innerHTML = `
                <h3>ğŸ“„ Contenido Esperado de los Archivos</h3>
                <div class="test-item">
                    <h4>js/mathParser.js debe empezar con:</h4>
                    <pre>/**
 * MATH PARSER - Sistema de evaluaciÃ³n matemÃ¡tica robusto
 */

class MathParser {
    constructor() {
        this.steps = [];</pre>
                </div>

                <div class="test-item">
                    <h4>js/exerciseData.js debe empezar con:</h4>
                    <pre>/**
 * EXERCISE DATA - Datos de ejercicios predefinidos
 */

const predefinedExercises = {</pre>
                </div>

                <div class="test-item">
                    <h4>js/script.js debe empezar con:</h4>
                    <pre>/**
 * MATH TUTOR - SCRIPT PRINCIPAL
 */

// Variables globales (ya declaradas en HTML)</pre>
                </div>
            `;
        }

        // Ejecutar diagnÃ³stico automÃ¡ticamente al cargar
        window.addEventListener('load', function() {
            setTimeout(runDiagnostic, 1000);
        });
    </script>

    <!-- Intentar cargar archivos de Math Tutor -->
    <script src="js/mathParser.js" onerror="console.error('âŒ No se pudo cargar mathParser.js')"></script>
    <script src="js/exerciseData.js" onerror="console.error('âŒ No se pudo cargar exerciseData.js')"></script>
    <script>
        console.log('ğŸ”§ DiagnÃ³stico de Math Tutor iniciado');
        console.log('ğŸ“Š MathParser disponible:', typeof MathParser !== 'undefined');
        console.log('ğŸ“Š Exercise data disponible:', typeof predefinedExercises !== 'undefined');
    </script>
</body>
</html>
